function showFrmProcess(e){$(".sidebar-close:visible").trigger("click");var o=$("#dlg-frmgeoprocess");o.length?$(".modal-body",o).empty().append(tmpl(e.template,e)):o=$("body").append(tmpl("tmpl-frmgeoprocess",e)).find("#dlg-frmgeoprocess"),o.find(".msg-board").hide(),o.modal("show")}function runGeoprocess(e){if(!e.onBeforeRunFnName||""==e.onBeforeRunFnName||"function"!=typeof window[e.onBeforeRunFnName]||window[e.onBeforeRunFnName]()){var o=$("#dlg-frmgeoprocess form"),s=o.find("#btnsubmit");return s.button("loading"),showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-info",msg:"<h4>Espere por favor...</h4>",delay:0}),$.ajax({type:"post",url:GEOSICOB_URL+"geoprocesamientoadd.php",data:o.serialize(),success:function(o){if(o.success&&"0"!=o.success){console.log(o),showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-info",msg:"<h4>"+o.msg+"</h4>",delay:0});var r=o.idgeoproceso,a=setInterval(function(){$.ajax({dataType:"json",url:GEOSICOB_URL+"geoprocesamientolist.php",data:{cmd:"search",x_idgeoproceso:r,opciones:"webservice"},beforeSend:function(e){showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-info",msg:'<div><i class="fa fa-clock-o fa-spin fa-fw fa-3x"></i><span class="h4 pull-left">Espere por favor...</span></div>'})},success:function(o){if(parseInt(o.pager.RecordCount)>0){console.log(o,o.rows[0].salida,o.pager.RecordCount);var r=JSON.parse(o.rows[0].salida)||{};if(jQuery.isEmptyObject(r))return void showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-info",msg:'<div><i class="fa fa-cog fa-spin fa-fw fa-3x"></i><span class="h4 pull-left">Procesando...</span></div>',delay:0});if(r.hasOwnProperty("error"))return showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-danger",msg:r.error,delay:0}),clearInterval(a),void s.button("reset");clearInterval(a),showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-success",msg:'<div><i class="fa fa-thumbs-o-up fa-3x"></i><span class="h4 pull-left">Proceso completado.</span></div>',delay:400}),r.lyr_geojson=o.rows[0].geojson,e.onSuccessFnName&&""!=e.onSuccessFnName&&"function"==typeof window[e.onSuccessFnName]?window[e.onSuccessFnName](r)&&$("#dlg-frmgeoprocess .close").click():$("#dlg-frmgeoprocess .close").click(),s.button("reset")}},error:function(){clearInterval(a),s.button("reset")}})},3e3);$("#dlg-frmgeoprocess").one("hide.bs.modal",function(){clearInterval(a)})}else console.log(o),showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-danger",msg:o.msg,delay:0}),s.button("reset")},error:function(e,o,r){s.button("reset"),showAlertMsg({container:"#dlg-frmgeoprocess .msg-board",typemsg:"alert-danger",msg:o,delay:0})}}),!1}}