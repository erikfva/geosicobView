<style>.yt-uix-checkbox-on-off{position:relative;display:inline-block;width:35px;padding-right:2px;overflow:hidden;vertical-align:middle;margin-left:7px}.yt-uix-checkbox-on-off input[type=checkbox]{position:absolute;opacity:0;width:37px;height:15px;margin:0;cursor:pointer}.yt-uix-checkbox-on-off input[type=checkbox]:checked+label{background-color:#167ac6}.yt-uix-checkbox-on-off label{display:inline-block;border:1px solid transparent;height:15px;width:100%;background:#b8b8b8;cursor:pointer;border-radius:20px;-webkit-transition:.2s cubic-bezier(.77,0,.175,1)}.yt-uix-checkbox-on-off input[type=checkbox]:checked+label .checked{display:inline-block;margin-top:3px;margin-left:6px;background:no-repeat url(//s.ytimg.com/yts/imgbin/www-hitchhiker-vflQ02J6M.webp) -64px -429px;background-size:auto;width:10px;height:7px}.yt-uix-checkbox-on-off input[type=checkbox]:checked+label .unchecked{display:none}.yt-uix-checkbox-on-off label .unchecked{display:inline-block;float:right;padding-right:3px}.yt-uix-checkbox-on-off input[type=checkbox]:checked+label .toggle{float:right}.yt-uix-checkbox-on-off label .toggle{float:left;background:#fbfbfb;height:13px;width:13px;border-radius:13px}</style><script id="tmpl-base-maps-item" type="text/x-tmpl">{% o.forEach(function(item, i){ %}<div class="row thumbnail basemap-thumbnail"><div class="col-xs-10 btn-thumbnail" id="{%=item.id%}" role="button" href="#" onclick='onSelectBaseMap("{%=item.id%}",this)'><img src="{%=item.mapthumbs%}" alt="..." class="pull-left img-circle" width="50" height="50" style="margin-right:5px"><h4 class="caption">{%=item.lyr_options.title%}</h4></div><div class="col-xs-2">{% if (item.description && item.description != '') { %} <a href="#{%=item.id%}-info" class="btn btn-link btn-toolbar" data-toggle="collapse"><i class="glyphicon glyphicon-info-sign"></i> </a>{% } %} {% if (item.template && item.template != '') { %} <a href="#{%=item.id%}-config" class="btn btn-link btn-toolbar pull-left" data-toggle="collapse"><i class="glyphicon glyphicon-cog" aria-hidden="true"></i> </a>{% } %}</div>{% if (item.description && item.description != '') { %}<div class="clearfix"></div><div id="{%=item.id%}-info" class="small collapse panel-info text-info panel-footer">{% print(item.description, true); %}</div>{% } %} {% if (item.template && item.template != '') { %}<div class="clearfix"></div><div id="{%=item.id%}-config" class="collapse modal-footer">{% include(item.template,item); %}</div>{% } %}</div>{% }); %}</script><script type="text/javascript">function renderBaseMapsPanel(e,a){var s=document.getElementById(a);if(void 0!==s){$(s).addClass("basemap container-fluid");var r=tmpl("tmpl-base-maps-item",e);$(s).append(r)}}function onSelectBaseMap(e,a){if($(a).closest(".basemap-thumbnail").hasClass("active")||$(a).hasClass("btn-thumbnail")){var s=loadjsonLayer(window.jsonLayers,e);$("#legend").removeClass("show").addClass("hide"),s.lyr_source.legendURL&&$("#legend").toggleClass("show hide").find("img").attr("src",s.lyr_source.legendURL),s&&"function"==typeof s.onSelectFn?s.onSelectFn(a):setBaseMap(e,a)}}function setBaseMapConfig(a,s){map.getLayers().forEach(function(e){"base"==e.getProperties().type&&a==e.get("id")&&e.getSource().getParams&&e.getSource().updateParams(s)})}function setBaseMap(a,e,s){map.getLayers().forEach(function(e){"base"==e.getProperties().type&&((s||a)==e.get("id")?(e.setZIndex(-1),e.setVisible(!0)):e.setVisible(!1))}),$(e).closest(".basemap").find(".basemap-thumbnail").removeClass("alert-info active"),$(e).closest(".basemap-thumbnail").addClass("alert-info active")}function loadjsonLayer(e,a){if("undefined"==typeof ol)return null;for(var s=0;s<e.length;++s){var i=e[s];if(i.id==a){if(i.loaded)return i;var r=null;switch(i.lyr_source.type){case"BingMaps":$.each(["Aerial","Road","AerialWithLabels"],function(e,a){var s=JSON.parse(JSON.stringify(i.lyr_options));s.type="base",s.displayInLayerSwitcher=!1;var r=JSON.parse(JSON.stringify(i.lyr_source));r.imagerySet=a,s.source=new ol.source.BingMaps(r);var l=new ol.layer.Tile(s);l.set("id",i.id+a),l.setVisible(!1),map.addLayer(l)}),i.loaded=!0;break;case"GOOGLE":$.each(["s","m","y","t","p"],function(e,a){var s=JSON.parse(JSON.stringify(i.lyr_options));s.type="base",s.displayInLayerSwitcher=!1;var r=JSON.parse(JSON.stringify(i.lyr_source));r.url+="&lyrs="+a,s.source=new ol.source.XYZ(r);var l=new ol.layer.Tile(s);l.set("id",i.id+a),l.setVisible(!1),map.addLayer(l)}),i.loaded=!0;break;case"OSM":(r=i.lyr_options).source=new ol.source.OSM;break;case"XYZ":(r=i.lyr_options).source=new ol.source.XYZ(i.lyr_source);break;case"Sentinel2":$.each(["1-NATURAL-COLOR","4_AGRICULTURE","2_COLOR_INFRARED__VEGETATION_"],function(e,a){var s=JSON.parse(JSON.stringify(i.lyr_options));s.type="base",s.displayInLayerSwitcher=!1;var r=JSON.parse(JSON.stringify(i.lyr_source));r.params.layers=a,s.source=new ol.source.TileWMS(r);var l=new ol.layer.Tile(s);l.set("id",i.id+a),l.setVisible(!1),map.addLayer(l)}),i.loaded=!0;break;case"MapServer":r=i.lyr_options,i.lyr_source.serverType="mapserver",r.source=new ol.source.TileWMS(i.lyr_source);break;case"WMS":i.tiled&&((r=i.lyr_options).source=new ol.source.TileWMS(i.lyr_source))}if(null!=r){r.type="base",r.displayInLayerSwitcher=!1;var l=new ol.layer.Tile(r);l.set("id",i.id),l.setVisible(!1),map.addLayer(l)}return i.onSelectFnName&&(i.onSelectFn=new Function("el",i.onSelectFnName+"(el);")),i.loaded=!0,i}}return null}</script><div id="legend" class="navbar navbar-toggle ol-control hide" style="right:0"><img src=""></div><script type="text/javascript">function onSelectBingMaps(a){setBaseMap("lyr_bingmap",a,"lyr_bingmap"+$("#bing-layer-select").val())}</script><script id="tmpl-bingmaps" type="text/x-tmpl"><div class="modal-content modal-body form-horizontal"><div class="form-group"><label for="bing-layer-select" class="pull-left col-sm-2 control-label">Mapa</label><div class="col-sm-10"><select class="form-control" id="bing-layer-select" onchange='onSelectBaseMap("lyr_bingmap",this)'><option value="Aerial">Im&aacute;gen satelital</option><option value="AerialWithLabels" selected="selected">Im&aacute;gen con etiquetas</option><option value="Road">Calles</option></select></div></div></div></script><script type="text/javascript">function onSelectGoo(o){setBaseMap("lyr_goo",o,"lyr_goo"+$("#goo-layer-select").val())}</script><script id="tmpl-goo" type="text/x-tmpl"><div class="modal-content modal-body form-horizontal"><div class="form-group"><label for="goo-layer-select" class="pull-left col-sm-2 control-label">Mapa</label><div class="col-sm-10"><select class="form-control" id="goo-layer-select" onchange='onSelectBaseMap("lyr_goo",this)'><option value="s">Im&aacute;gen satelital</option><option value="y">Im&aacute;gen con etiquetas</option><option value="m" selected="selected">Mapa de calles</option><option value="t">Terreno</option></select></div></div></div></script><script type="text/javascript">function getSentinelOptions(){return{layers:$("#sentinel2-layer-select").val()+($("#sentinel2-showdate").prop("checked")?",DATE":""),MAXCC:$("#sentinel2-cloud").val()}}function onSelectSentinel(e){setBaseMapConfig("lyr_sentinel"+$("#sentinel2-layer-select").val(),getSentinelOptions()),setBaseMap("lyr_sentinel"+$("#sentinel2-layer-select").val(),e,"lyr_sentinel"+$("#sentinel2-layer-select").val())}</script><script id="tmpl-sentinel" type="text/x-tmpl"><div class="col-sm-12 form-group"><div class="col-sm-8 form-control-static input-sm"><select class="form-control" id="sentinel2-layer-select" onchange='onSelectBaseMap("lyr_sentinel",this)'><option value="1-NATURAL-COLOR" selected="selected">Color Natural</option><option value="2_COLOR_INFRARED__VEGETATION_">Indice de Vegetaci&oacute;n</option><option value="4_AGRICULTURE">Agricultura</option></select></div><div class="text-center col-sm-4 form-control-static input-sm"><i class="fa fa-calendar fa-2x" aria-hidden="true"></i> <span class="yt-uix-checkbox-on-off"><input id="sentinel2-showdate" class="" type="checkbox" onchange='onSelectBaseMap("lyr_sentinel",this)'> <label for="sentinel2-showdate" id="sentinel2-showdate-label"><span class="checked">&nbsp;</span> <span class="unchecked"></span> <span class="toggle">&nbsp;</span></label></span></div></div><div class="col-sm-12 text-center"><div class="pull-left"><i class="fa fa-cloud fa-2x" aria-hidden="true"></i> <i class="glyphicon glyphicon-minus-sign" aria-hidden="true"></i></div><span id="sentinel2-cloud-info" class="h4">{%=o.lyr_source.params.MAXCC%}</span><div class="pull-right"><i class="glyphicon glyphicon-plus-sign" aria-hidden="true"></i> <i class="fa fa-cloud fa-2x" aria-hidden="true"></i></div><input id="sentinel2-cloud" name="thumb-roundness" oninput='$("#sentinel2-cloud-info").text(this.value)' onchange='onSelectBaseMap("lyr_sentinel",this)' label="" class="col-xs-4 form-control-static input-sm" type="range" value="{%=o.lyr_source.params.MAXCC%}" min="0" max="100" step="1"></div></script>